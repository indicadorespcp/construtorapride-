<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />  
<title>PowerBI Vault</title>
<style>
  html, body { height: 100%; margin: 0; font-family: Arial, sans-serif; }
  #matrixCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #082B4F; z-index: -1; }
  body { display: flex; justify-content: center; align-items: center; }

  #loginBox, #linksBox { background: rgba(255,255,255,0.95); padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.25); text-align: center; }
  #linksBox { display: none; background: rgba(0,50,100,0.95); width: 600px; padding: 50px; max-height: 500px; overflow-y: auto; color: #ddd9ce; position: relative; }
  input, button { width: 94%; padding: 12px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; }
  button { cursor: pointer; background: #0078D4; color: white; font-weight: bold; border: none; }
  button:hover { background: #005fa3; }
  .item { background: #e8f0fe; padding: 15px; margin-top: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
  .deleteBtn { background: #ff4c4c; border: none; color: white; padding: 4px 6px; border-radius: 4px; cursor: pointer; }
  .deleteBtn:hover { background: #e04343; }
  .abrirBtn { background: #0078D4; color: white; padding: 8px 12px; border-radius: 5px; text-decoration: none; font-weight: bold; display: flex; align-items: center; }
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<div id="loginBox">
  <h2>Login</h2>
  <input id="user" placeholder="Usuário">
  <input id="pass" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<div id="linksBox">
  <h2>Bem-vindo!</h2>
  <input id="newTitulo" placeholder="Título do relatório">
  <input id="newLink" placeholder="Link do Power BI">
  <button onclick="addLink()">Adicionar Link</button>
  <div id="listaLinks"></div>
  <button id="logoutBtn" onclick="logoutLinks()">Sair</button>
</div>

<script>
// USUÁRIOS
const usuarios = [
  { usuario: "adriano", senha: "Adr#1980@!" },
  { usuario: "maria", senha: "abcd" },
  { usuario: "wesley", senha: "senha123" },
  { usuario: "nicole", senha: "nicolesumida" },
  { usuario: "gustavo", senha: "diciocio1234" }
];

// LINKS
let links = [
  { titulo: "Gestão de Obras", link: "https://app.powerbi.com/view?r=..." },
  { titulo: "Análise de Custos", link: "https://app.powerbi.com/view?r=..." },
  { titulo: "Controle de Estoque", link: "https://app.powerbi.com/view?r=..." }
];

let usuarioLogado = "";

// LOGIN
function login() {
  const userInput = document.getElementById("user").value.trim();
  const passInput = document.getElementById("pass").value;
  const usuarioEncontrado = usuarios.find(u => u.usuario === userInput && u.senha === passInput);

  if (usuarioEncontrado) {
    usuarioLogado = usuarioEncontrado.usuario;
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("linksBox").style.display = "block";
    mostrarLinks();
  } else {
    alert("Usuário ou senha incorretos.");
  }
}

function logoutLinks() {
  document.getElementById("linksBox").style.display = "none";
  document.getElementById("loginBox").style.display = "block";
  document.getElementById("user").value = "";
  document.getElementById("pass").value = "";
}

// LINKS
function mostrarLinks() {
  const area = document.getElementById("listaLinks");
  area.innerHTML = "";

  links.forEach((l, index) => {
    const div = document.createElement("div");
    div.className = "item";

    const titulo = document.createElement("strong");
    titulo.textContent = l.titulo;
    div.appendChild(titulo);

    const abrirBtn = document.createElement("a");
    abrirBtn.href = "javascript:void(0)";
    abrirBtn.textContent = "Abrir Relatório";
    abrirBtn.className = "abrirBtn";
    abrirBtn.onclick = () => abrirViewer(l.link);
    div.appendChild(abrirBtn);

    if (usuarioLogado === "adriano") {
      const delBtn = document.createElement("button");
      delBtn.textContent = "Excluir";
      delBtn.className = "deleteBtn";
      delBtn.onclick = () => {
        links.splice(index, 1);
        mostrarLinks();
      };
      div.appendChild(delBtn);
    }

    area.appendChild(div);
  });

  const displayAdd = (usuarioLogado === "adriano") ? "block" : "none";
  document.getElementById("newTitulo").style.display = displayAdd;
  document.getElementById("newLink").style.display = displayAdd;
  document.querySelector("#linksBox button[onclick='addLink()']").style.display = displayAdd;
}

function addLink() {
  const titulo = document.getElementById("newTitulo").value.trim();
  const link = document.getElementById("newLink").value.trim();
  if (!titulo || !link) { alert("Preencha título e link!"); return; }
  links.push({ titulo, link });
  document.getElementById("newTitulo").value = "";
  document.getElementById("newLink").value = "";
  mostrarLinks();
}

function abrirViewer(url) { window.open(url, "_blank"); }

// MATRIX SIMPLES
const canvas = document.getElementById('matrixCanvas');
const ctx = canvas.getContext('2d');
const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
const fontSize = 18;
let columns = Math.floor(window.innerWidth / fontSize);
let drops = Array(columns).fill(0);

function drawMatrix() {
  ctx.fillStyle = 'rgba(8,43,79,0.05)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  for (let i = 0; i < drops.length; i++) {
    const text = letters[Math.floor(Math.random() * letters.length)];
    ctx.fillStyle = '#00f5ff';
    ctx.font = fontSize + 'px monospace';
    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
    drops[i] = (drops[i] * fontSize > canvas.height && Math.random() > 0.975) ? 0 : drops[i] + 1;
  }
  requestAnimationFrame(drawMatrix);
}

function resizeMatrix() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  columns = Math.floor(window.innerWidth / fontSize);
  drops = Array(columns).fill(0);
}

window.addEventListener('resize', resizeMatrix);
resizeMatrix();
drawMatrix();
</script>
</body>
</html>
